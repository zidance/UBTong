!function(t,e){"use strict";var i="createTouch"in document||"ontouchstart"in t,s=document.createElement("div").style,n=function(){var e,t={OTransform:["-o-","otransitionend"],WebkitTransform:["-webkit-","webkitTransitionEnd"],MozTransform:["-moz-","transitionend"],msTransform:["-ms-","MSTransitionEnd"],transform:["","transitionend"]};for(e in t)if(e in s)return t[e];return!1}(),a=[["width","left","right"],["height","top","bottom"]],o=n&&n[0],r=function(t){return(t+"").replace(/^-ms-/,"ms-").replace(/-([a-z]|[0-9])/gi,function(t,e){return(e+"").toUpperCase()})},h=function(t){var e=r(o+t);return t in s&&t||e in s&&e},f=function(t,e){for(var i in e)"undefined"==typeof t[i]&&(t[i]=e[i]);return t},l=function(t){for(var e=t.children||t.childNodes,i=[],s=0;s<e.length;s++)1===e[s].nodeType&&i.push(e[s]);return i},u=function(t,e){for(var i=0,s=t.length;s>i&&e.call(t[i],i,t[i])!==!1;i++);},c=function(t){t=v.fn.eventHook(t),t.preventDefault()},d=i?"touchstart":"mousedown",g=i?"touchmove":"mousemove",m=i?"touchend":"mouseup",p=n[1]||"",v=function(t,e){return this instanceof v?("string"==typeof t||t.nodeType||(e=t,t=e.id),t.nodeType||(t=document.getElementById(t)),this.cfg=f(e||{},this._default),this.element=t,void(this.element&&(this.container=this.element.parentNode||document.body,this.setup()))):new v(t,e)};v.fn=v.prototype={_default:{id:"slider",begin:0,auto:!0,speed:600,timeout:5e3,direction:"left",align:"center",fixWidth:!0,mouseWheel:!1,before:new Function,after:new Function},css:function(t,e){if("string"==typeof e){var i=document.defaultView&&document.defaultView.getComputedStyle&&getComputedStyle(t,null)||t.currentStyle||t.style||{};return i[r(e)]}var n,a;for(n in e)a="float"==n?"cssFloat"in s?"cssFloat":"styleFloat":r(n),t.style[a]=e[n]},addListener:function(t,e,i,s){return t.addEventListener?(t.addEventListener(e,i,s),!0):t.attachEvent?(t.attachEvent("on"+e,i),!0):!1},removeListener:function(t,e,i,s){return t.addEventListener?(t.removeEventListener(e,i,s),!0):t.attachEvent?(t.detachEvent("on"+e,i),!0):!1},eventHook:function(e){var s={},n="changedTouches touches scale target view which clientX clientY fromElement offsetX offsetY pageX pageY toElement".split(" ");if(e=e||t.event,u(n,function(){s[this]=e[this]}),s.target=e.target||e.srcElement||document,3===s.target.nodeType&&(s.target=s.target.parentNode),s.preventDefault=function(){e.preventDefault&&e.preventDefault(),s.returnValue=e.returnValue=!1},s.stopPropagation=function(){e.stopPropagation&&e.stopPropagation(),s.cancelBubble=e.cancelBubble=!0},i&&s.touches.length)s.pageX=s.touches.item(0).pageX,s.pageY=s.touches.item(0).pageY;else if("undefined"==typeof e.pageX){var a=document.documentElement,o=document.body;s.pageX=e.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),s.pageY=e.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)}return s.origEvent=e,s},bind:function(t,e){return function(){return t.apply(e,arguments)}},setup:function(){if(this.slides=l(this.element),this.length=this.slides.length,this.cfg.timeout=parseInt(this.cfg.timeout),this.cfg.speed=parseInt(this.cfg.speed),this.cfg.begin=parseInt(this.cfg.begin),this.cfg.auto=!!this.cfg.auto,this.cfg.timeout=Math.max(this.cfg.timeout,this.cfg.speed),this.touching=!!i,this.css3transition=!!n,this.index=this.cfg.begin<0||this.cfg.begin>=this.length?0:this.cfg.begin,this.length<1)return!1;switch(this.cfg.direction){case"up":case"down":this.direction=this.cfg.direction,this.vertical=1;break;case"right":this.direction="right";default:this.direction=this.direction||"left",this.vertical=0}this.addListener(this.element,d,this.bind(this._start,this),!1),this.addListener(document,g,this.bind(this._move,this),!1),this.addListener(document,m,this.bind(this._end,this),!1),this.addListener(document,"touchcancel",this.bind(this._end,this),!1),this.addListener(this.element,p,this.bind(this.transitionend,this),!1),this.addListener(t,"resize",this.bind(function(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(this.bind(this.resize,this),100)},this),!1),this.cfg.mouseWheel&&(this.addListener(this.element,"mousewheel",this.bind(this.mouseScroll,this),!1),this.addListener(this.element,"DOMMouseScroll",this.bind(this.mouseScroll,this),!1)),this.playing=this.cfg.auto,this.resize()},getSum:function(t,e,i){for(var s=0,n=e,a=r("-"+t);i>n;n++)s+=this["getOuter"+a](this.slides[n]);return s},getPos:function(t,e){var i=r("-"+t),s=this.getSum(t,e,e+1),n=this.getSum(t,0,e)+this["getOuter"+i](this.element)/2-this["get"+i](this.element)/2;switch(this.cfg.align){case"left":return-n;case"right":return this[t]-s-n;default:return(this[t]-s)/2-n}},resize:function(){clearTimeout(this.aniTimer);var e,t=this,i=a[this.vertical][0],s=r("-"+i),n=this.css(this.container,"position");return this.css(this.container,{overflow:"hidden",visibility:"hidden",listStyle:"none",position:"static"==n?"relative":n}),this[i]=this["get"+s](this.container),e={"float":this.vertical?"none":"left",display:"block"},u(this.slides,function(){t.cfg.fixWidth&&(e[i]=t[i]-t["margin"+s](this)-t["padding"+s](this)-t["border"+s](this)+"px"),t.css(this,e)}),this.total=this.getSum(i,0,this.length),e={position:"relative",overflow:"hidden"},e[o+"transition-duration"]="0ms",e[i]=this.total+"px",e[a[this.vertical][1]]=this.getPos(i,this.index)+"px",this.css(this.element,e),this.css(this.container,{visibility:"visible"}),this.playing&&this.play(),this},slide:function(t,e){var r,l,i=a[this.vertical][1],s=a[this.vertical][0],n=h("transition"),o=parseFloat(this.css(this.element,i))||0,f={},u=this.getSum(s,t,t+1);if(t=Math.min(Math.max(0,t),this.length-1),e="undefined"==typeof e?this.cfg.speed:parseInt(e),r=this.getPos(s,t),l=r-o,e=Math.abs(l)<u?Math.ceil(Math.abs(l)/u*e):e,n)f[n]=i+" ease "+e+"ms",f[i]=r+"px",this.css(this.element,f);else{var c=this,d=0,g=e/10,m=function(t,e,i,s){return-i*((t=t/s-1)*t*t*t-1)+e},p=function(){g>d?(d++,c.element.style[i]=Math.ceil(m(d,o,l,g))+"px",c.aniTimer=setTimeout(p,10)):(c.element.style[i]=r+"px",c.transitionend({propertyName:i}))};clearTimeout(this.aniTimer),p()}return this.cfg.before.call(this,t,this.slides[this.index]),this.index=t,this},play:function(){return clearTimeout(this.timer),this.playing=!0,this.timer=setTimeout(this.bind(function(){"left"==this.direction||"up"==this.direction?this.next():this.prev()},this),this.cfg.timeout),this},pause:function(){return clearTimeout(this.timer),this.playing=!1,this},stop:function(){return this.pause(),this.slide(0)},prev:function(t,e){clearTimeout(this.timer);var i=this.index;return t="undefined"==typeof t?t=1:t%this.length,i-=t,i=e===!1?Math.max(i,0):0>i?this.length+i:i,this.slide(i)},next:function(t,e){clearTimeout(this.timer);var i=this.index;return"undefined"==typeof t&&(t=1),i+=t,e===!1?i=Math.min(i,this.length-1):i%=this.length,this.slide(i)},_start:function(t){t=this.eventHook(t),this.touching||t.preventDefault(),this.removeListener(this.element,"click",c),this.startPos=[t.pageX,t.pageY],this.element.style[r(o+"transition-duration")]="0ms",this.startTime=+new Date,this._pos=parseFloat(this.css(this.element,a[this.vertical][1]))||0},_move:function(t){if(this.startPos&&(!t.scale||1===t.scale)){t=this.eventHook(t),this.stopPos=[t.pageX,t.pageY];var e=a[this.vertical][1],i=a[this.vertical][0],s=this.stopPos[this.vertical]-this.startPos[this.vertical];this.scrolling||"undefined"==typeof this.scrolling&&Math.abs(s)>=Math.abs(this.stopPos[1-this.vertical]-this.startPos[1-this.vertical])?(t.preventDefault(),s/=!this.index&&s>0||this.index==this.length-1&&0>s?Math.abs(s)/this[i]+1:1,this.element.style[e]=this._pos+s+"px",s&&"undefined"==typeof this.scrolling&&(this.scrolling=!0,clearTimeout(this.timer),clearTimeout(this.aniTimer))):this.scrolling=!1}},_end:function(t){if(this.startPos){if(this.scrolling){var r,h,f,e=a[this.vertical][0],s=(a[this.vertical][1],this.stopPos[this.vertical]-this.startPos[this.vertical]),n=Math.abs(s),o=n/s,l=this.index,u=0;if(this.addListener(this.element,"click",c),n>20){h=parseFloat(this.css(this.element,a[this.vertical][1]));do{if(!(l>=0&&l<this.length)){l+=o;break}f=this.getPos(e,l),r=this.getSum(e,l,l+1)}while(Math.abs(f-h)>r/2&&(l-=o));u=Math.abs(l-this.index),!u&&+new Date-this.startTime<250&&(u=1)}s>0?this.prev(u,!1):this.next(u,!1),this.playing&&this.play()}delete this._pos,delete this.stopPos,delete this.startPos,delete this.scrolling,delete this.startTime}},mouseScroll:function(t){if(this.cfg.mouseWheel){t=this.eventHook(t),t.preventDefault();var e=t.origEvent,i=e.wheelDelta||e.detail&&-1*e.detail||0;i/Math.abs(i);i>0?this.prev(1,!1):this.next(1,!1)}},transitionend:function(t){t.propertyName==a[this.vertical][1]&&(this.cfg.after.call(this,this.index,this.slides[this.index]),this.playing&&this.play())}},u(["Width","Height"],function(t,e){e.toLowerCase();u(["margin","padding","border"],function(i,s){v.fn[s+e]=function(e){return parseFloat(this.css(e,s+"-"+a[t][1]+("border"==s?"-width":"")))+parseFloat(this.css(e,s+"-"+a[t][2]+("border"==s?"-width":"")))}}),v.fn["get"+e]=function(t){return t["offset"+e]-this["padding"+e](t)-this["border"+e](t)},v.fn["getOuter"+e]=function(t){return t["offset"+e]+this["margin"+e](t)}}),t.TouchSlider=v}(window);
